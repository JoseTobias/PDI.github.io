<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Processamento Digital de Imagens</title>

    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="estilo.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<script>
	  	$(document).ready(function(){
	      	$("figure[id ^= fig]").css("display","none");
			$("button[id ^= button_fig]").click(function(){
				$("figure[id ^= fig]").fadeToggle(2000);
			})
			$("figcaption p").css("color","green");
		});
	</script>


  </head>


  <body>



	<div class="navbar navbar-fixed-left container collapse navbar-collapse" id="header">
		<div id="logo">
			<h3><a href="index.html">Processamento Digital de Imagens</a></h3>
			<span>(PDI)</span>
		</div>
		<div id="menu" style="position: relative; overflow: auto">
			<ul>
				<li class="current_page_item"><a href="#inicio" accesskey="1" title="">Início</a></li>
				<li><a href="#ex1_gamb" accesskey="2" title="">Exercício 1</a></li>
				<li><a href="#ex2_gamb" accesskey="3" title="">Exercício 2</a></li>
				<li><a href="#ex3_gamb" accesskey="4" title="">Exercício 3</a></li>
				<li><a href="#ex4_gamb" accesskey="5" title="">Exercício 4</a></li>
				<li><a href="#ex5_gamb" accesskey="6" title="">Exercício 5</a></li>
				<li><a href="#ex6_gamb" accesskey="7" title="">Exercício 6</a></li>
				<li><a href="#ex7_gamb" accesskey="8" title="">Exercício 7</a></li>
				<li><a href="#ex8_gamb" accesskey="9" title="">Exercício 8</a></li>
				<li><a href="#ex9_gamb" accesskey="10" title="">Exercício 9</a></li>
				<li><a href="#ex10_gamb" accesskey="11" title="">Exercício 10</a></li>
				<!--  -->

			</ul>
		</div>
	</div>

	<h1 class="home" id="inicio">Repositório dos Códigos</h1>
	<div id = "main">
		<h4>Nos foram propostos alguns problemas recorrentes na disciplina de Processamento Digital de Imagens (PDI).
			Em razão disso, esse site tem como objetivo colocar as resoluções dos exercícios explicando nossas ideias que regem as resoluções dos prolemas abaixo.
		</h4>
		<h1>Exercícios</h1>

		<div id="ex1_gamb"></div>
		<div id="ex1">
			<h3>1.Exercício regions</h3>
			<br>
			<h4>Esse programa solicita as coordenadas de dois pontos que serão o pixel inicial da região e o final. Nessa
				região o programa irá fazer o negativo da imagem como na <a href="#fig1">figura 1</a>.
			</h4>

			<figure id="fig1">
				<img src="imagens/fig1.png" class="img-responsive" id="fig1">
				<figcaption>
					<p>figura 1. Exemplo de utilização do programa regions.cpp.</p>
				</figcaption>
			</figure>
			<button id="button_fig1">Result</button>
			
			<br><br>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iostream</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>fstream</span><span style='color:#800000; '>></span>

<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> <span style='color:#666616; '>std</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>class</span> Ponto<span style='color:#800080; '>{</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000; font-weight:bold; '>private</span><span style='color:#e34adc; '>:</span>
	<span style='color:#800000; font-weight:bold; '>int</span> x<span style='color:#808030; '>,</span>y<span style='color:#800080; '>;</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000; font-weight:bold; '>public</span><span style='color:#e34adc; '>:</span>
	<span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span>digitar<span style='color:#808030; '>(</span><span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span>I<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		I <span style='color:#808030; '>></span><span style='color:#808030; '>></span> x<span style='color:#800080; '>;</span>
		I <span style='color:#808030; '>></span><span style='color:#808030; '>></span> y<span style='color:#800080; '>;</span>
		<span style='color:#800000; font-weight:bold; '>return</span> I<span style='color:#800080; '>;</span>
	<span style='color:#800080; '>}</span>

	<span style='color:#800000; font-weight:bold; '>inline</span> <span style='color:#800000; font-weight:bold; '>int</span> getX<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> x<span style='color:#800080; '>;</span><span style='color:#800080; '>}</span>
	<span style='color:#800000; font-weight:bold; '>inline</span> <span style='color:#800000; font-weight:bold; '>int</span> getY<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> y<span style='color:#800080; '>;</span><span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>

<span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span><span style='color:#800000; font-weight:bold; '>operator</span><span style='color:#808030; '>></span><span style='color:#808030; '>></span><span style='color:#808030; '>(</span><span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span>I<span style='color:#808030; '>,</span>Ponto <span style='color:#808030; '>&amp;</span>P<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>P<span style='color:#808030; '>.</span>digitar<span style='color:#808030; '>(</span>I<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#800000; font-weight:bold; '>return</span> I<span style='color:#800080; '>;</span><span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	Mat image<span style='color:#800080; '>;</span>
	Vec3b val<span style='color:#800080; '>;</span>
	Ponto p1<span style='color:#808030; '>,</span>p2<span style='color:#800080; '>;</span>

	image<span style='color:#808030; '>=</span> imread<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>biel.png</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span>CV_LOAD_IMAGE_GRAYSCALE<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>image<span style='color:#808030; '>.</span>data<span style='color:#808030; '>)</span>
		<span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>nao abriu biel.png</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#603000; '>endl</span><span style='color:#800080; '>;</span>
		
	<span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>insira o primeiro ponto: </span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
	<span style='color:#603000; '>cin</span> <span style='color:#808030; '>></span><span style='color:#808030; '>></span> p1<span style='color:#800080; '>;</span>
	<span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>insira o segundo ponto: </span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
	<span style='color:#603000; '>cin</span> <span style='color:#808030; '>></span><span style='color:#808030; '>></span> p2<span style='color:#800080; '>;</span>
	namedWindow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>janela</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span>WINDOW_AUTOSIZE<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span>p1<span style='color:#808030; '>.</span>getY<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>i<span style='color:#808030; '>&lt;</span>p2<span style='color:#808030; '>.</span>getY<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span>p1<span style='color:#808030; '>.</span>getX<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>&lt;</span>p2<span style='color:#808030; '>.</span>getX<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span> <span style='color:#808030; '>-</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
		<span style='color:#800080; '>}</span>
	<span style='color:#800080; '>}</span>

	imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>janela</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> image<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	waitKey<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>  
	<span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>

			<h4>Para fazer esse programa primeiro criamos a classe Ponto para temos um dado que armazena as coordenadas
				de cada ponto da região. E em seguida sobrecarregamos um operador >> para lermos os dados dos pontos mais
				intuitivamente. 
			</h4>
				
			<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>class</span> Ponto<span style='color:#800080; '>{</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000; font-weight:bold; '>private</span><span style='color:#e34adc; '>:</span>
	<span style='color:#800000; font-weight:bold; '>int</span> x<span style='color:#808030; '>,</span>y<span style='color:#800080; '>;</span>
<span style='color:#e34adc; '>&#xa0;&#xa0;&#xa0;&#xa0;</span><span style='color:#800000; font-weight:bold; '>public</span><span style='color:#e34adc; '>:</span>
	<span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span>digitar<span style='color:#808030; '>(</span><span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span>I<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		I <span style='color:#808030; '>></span><span style='color:#808030; '>></span> x<span style='color:#800080; '>;</span>
		I <span style='color:#808030; '>></span><span style='color:#808030; '>></span> y<span style='color:#800080; '>;</span>
		<span style='color:#800000; font-weight:bold; '>return</span> I<span style='color:#800080; '>;</span>
	<span style='color:#800080; '>}</span>

	<span style='color:#800000; font-weight:bold; '>inline</span> <span style='color:#800000; font-weight:bold; '>int</span> getX<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> x<span style='color:#800080; '>;</span><span style='color:#800080; '>}</span>
	<span style='color:#800000; font-weight:bold; '>inline</span> <span style='color:#800000; font-weight:bold; '>int</span> getY<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span><span style='color:#800000; font-weight:bold; '>return</span> y<span style='color:#800080; '>;</span><span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>
	
<span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span><span style='color:#800000; font-weight:bold; '>operator</span><span style='color:#808030; '>></span><span style='color:#808030; '>></span><span style='color:#808030; '>(</span><span style='color:#603000; '>istream</span> <span style='color:#808030; '>&amp;</span>I<span style='color:#808030; '>,</span>Ponto <span style='color:#808030; '>&amp;</span>P<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>P<span style='color:#808030; '>.</span>digitar<span style='color:#808030; '>(</span>I<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span><span style='color:#800000; font-weight:bold; '>return</span> I<span style='color:#800080; '>;</span><span style='color:#800080; '>}</span>
</pre>

			<h4>Depois de solicitar os pontos fazemos o negativo de cada pixel da região e exibimos a imagem da seguinte forma:</h4>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span>p1<span style='color:#808030; '>.</span>getY<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>i<span style='color:#808030; '>&lt;</span>p2<span style='color:#808030; '>.</span>getY<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span>p1<span style='color:#808030; '>.</span>getX<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>&lt;</span>p2<span style='color:#808030; '>.</span>getX<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span> <span style='color:#808030; '>-</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
		</div>

		<div id="ex2_gamb"></div>
		<div id="ex2">
			<h3>2.Exercício trocaregioes</h3>
			<br>
			<h4>Esse programa troca as regiões da figura. Na imagem <a href="#fig2">figura 2</a> podemos observar o resultado.</h4>

			<figure id="fig2">
				<!-- image -->
				<img src="imagens/fig2.png" class="img-responsive" id="fig2">
				<figcaption>
					<!-- paragraph -->
					<p>figura 2. Exemplo de utilização do programa trocaregioes.cpp.</p>
				</figcaption>
			</figure>
			<button id="button_fig2">Result</button>

			<br><br>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iostream</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>algorithm</span><span style='color:#800000; '>></span><span style='color:#004a43; '> </span>

<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> <span style='color:#666616; '>std</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  Mat image<span style='color:#800080; '>;</span>
  Vec3b val<span style='color:#800080; '>;</span>

  image<span style='color:#808030; '>=</span> imread<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>biel.png</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span>CV_LOAD_IMAGE_GRAYSCALE<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>image<span style='color:#808030; '>.</span>data<span style='color:#808030; '>)</span>
	<span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>nao abriu biel.png</span><span style='color:#800000; '>"</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#603000; '>endl</span><span style='color:#800080; '>;</span>
	
  namedWindow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>janela</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span>WINDOW_AUTOSIZE<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>i<span style='color:#808030; '>&lt;</span>image<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span>i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>&lt;</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>&lt;</span><span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		  <span style='color:#603000; '>swap</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>,</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>></span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		  <span style='color:#603000; '>swap</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>-</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	<span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>
  
  imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>janela</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> image<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  imwrite<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>labeling.png</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> image<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  waitKey<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>  
  <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>

				<h4>Para trocar os quadrantes precisamos percorrer metade da matriz de pixels. Para fazer isso percorremos
					a com o comando for. Enquanto percorriamos um quadrante da matriz trocamos o primeiro pixel com
					o primeiro quadrante desejado, e assim para todos os pixels da imagem da seguinte forma.
				</h4>

				<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>i<span style='color:#808030; '>&lt;</span>image<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span>i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>&lt;</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>&lt;</span><span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		<span style='color:#603000; '>swap</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>,</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800080; '>}</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>></span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		<span style='color:#603000; '>swap</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>-</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
		</div>

		<div id="ex3_gamb"></div>
		<div id="ex3">
			<h3>3.Exercício labeling</h3>
			<br>
			<h4>Com esse programa resolvemos os dois problemas, o da quanidade de imagens e o de identificar
				e contar as bolhas com buracos. A <a href="#fig3">figura 3</a> foi a imagem uttilizada no primeiro
				teste, já a <a href="#fig4">figura 4</a> foi utilizada no segundo teste.
				Na <a href="#fig5">figura 5</a> temos o resultado do primeiro teste, que foi feito com uma imagem
				com bolhas com no máximo um furo. O segundo teste foi realizado com uma bolas com dois furos e o
				resultado foi o mesmo da <a href="#fig5">figura 5</a> crecentando apenas um foro em uma bolha da imagem
				como mostra <a href="#fig4">figura 4</a>.
			</h4>

			<div>
				<div>
					<img src="imagens/fig3.png" class="img-responsive" id="fig3">
						figura 3. Contém apenas bolhas com um furo.
				</div>
				<br>
				<div><img src="imagens/fig4.png" class="img-responsive" id="fig4">
						figura 4. Contém uma bolha com dois furos.
				</div>
			</div>
			
			<br>
			<div>
				<img src="imagens/fig5.jpeg" class="img-responsive" id="fig5">
				figura 5. Contém apenas bolhas com um furo.
			</div>
			<br>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iostream</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>></span>

<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>


<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> argc<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span> argv<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  Mat image<span style='color:#808030; '>,</span> im_aux<span style='color:#808030; '>,</span> mask<span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>int</span> width<span style='color:#808030; '>,</span> height<span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>int</span> nobjects<span style='color:#808030; '>,</span> nfuro <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>

  CvPoint p<span style='color:#800080; '>;</span>
  image <span style='color:#808030; '>=</span> imread<span style='color:#808030; '>(</span>argv<span style='color:#808030; '>[</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>CV_LOAD_IMAGE_GRAYSCALE<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  im_aux <span style='color:#808030; '>=</span> imread<span style='color:#808030; '>(</span>argv<span style='color:#808030; '>[</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>CV_LOAD_IMAGE_GRAYSCALE<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>image<span style='color:#808030; '>.</span>data<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#666616; '>std</span><span style='color:#800080; '>::</span><span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>imagem nao carregou corretamente</span><span style='color:#0f69ff; '>\n</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>return</span><span style='color:#808030; '>(</span><span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
  width<span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>width<span style='color:#800080; '>;</span>
  height<span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>height<span style='color:#800080; '>;</span>

  p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
  p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>

  nobjects <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
  <span style='color:#696969; '>//removendo objetos de borda</span>
  <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>height<span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j<span style='color:#808030; '>&lt;</span>width<span style='color:#800080; '>;</span> j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>i <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>|</span><span style='color:#808030; '>|</span> j <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>|</span><span style='color:#808030; '>|</span> i <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> height<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>|</span><span style='color:#808030; '>|</span> j <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> width<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>im_aux<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	<span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>

  <span style='color:#696969; '>//pintando o fundo</span>
  floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>height<span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span> j<span style='color:#808030; '>&lt;</span>width<span style='color:#800080; '>;</span> j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span>j<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		<span style='color:#696969; '>// achou um furo</span>
		nfuro<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	  <span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>

  <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>height<span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j<span style='color:#808030; '>&lt;</span>width<span style='color:#800080; '>;</span> j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		<span style='color:#696969; '>// achou um objeto</span>
		nobjects<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	  <span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>

  <span style='color:#666616; '>std</span><span style='color:#800080; '>::</span><span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>Tem </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> nobjects <span style='color:#808030; '>+</span> nfuro <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> bolhas na imagem. </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> nfuro <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> delas tem furos</span><span style='color:#0f69ff; '>\n</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
  imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>image</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> im_aux<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  imwrite<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>labeling.png</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> image<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  waitKey<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>
			<h4>
				O primeiro passo é remover as bolhas da borda.
			</h4>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>height<span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j<span style='color:#808030; '>&lt;</span>width<span style='color:#800080; '>;</span> j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>i <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>|</span><span style='color:#808030; '>|</span> j <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>|</span><span style='color:#808030; '>|</span> i <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> height<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>|</span><span style='color:#808030; '>|</span> j <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> width<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>im_aux<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	<span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>

			<h4>
				O segundo passo é pintar o fundo de uma cor diferente de branco (255) e de preto (0).
			</h4>

			<pre style='color:#000000;background:#ffffff; border: 0px'>floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			</pre>

			<h4>
				O terceiro passo é encontrar as bolhas com furo, procuramos por um pixel preto precedido de um branco,
				já que pintamos o fundo temos a garantia de que os pixels pretos estão apenas dentro das bolhas. Após
				encontrar o pixel preto pintamos  a regiao que ele se encontra com a cor do fundo, e pintamos também a
				região do pixel anterior, ou seja pintamos a bolha com a cor do fundo também. Isso nos garante contar
				quantas bolhas tem furos, independente de quantos furos ela tenha.
			</h4>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>height<span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span> j<span style='color:#808030; '>&lt;</span>width<span style='color:#800080; '>;</span> j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span>j<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		<span style='color:#696969; '>// achou um objeto</span>
		nfuro<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	<span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>

			<h4>
				Com a coloração brannca (255) restaram apenas as bolhas sem furo para ser contadas. Então contamos elas e
				temos todos os dados que precisamos.
			</h4>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>height<span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j<span style='color:#808030; '>&lt;</span>width<span style='color:#800080; '>;</span> j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
	  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>255</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
		<span style='color:#696969; '>// achou um objeto</span>
		nobjects<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>x<span style='color:#808030; '>=</span>j<span style='color:#800080; '>;</span>
		p<span style='color:#808030; '>.</span>y<span style='color:#808030; '>=</span>i<span style='color:#800080; '>;</span>
		floodFill<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>p<span style='color:#808030; '>,</span><span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	  <span style='color:#800080; '>}</span>
	<span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
			
			<h4>
				É importante ressaltar que a imagem exibida não é a imagem que foi processada por todo o código, para a exibição
				da imagem criamos uma imagem auxiliar que passou apenas pelo processo de remoção dos objetos da borda.
			</h4>

		</div>

		<div id="ex4_gamb"></div>
		<div id="ex4">
			<h3>4. Equalise.cpp</h3>
			<h4>
				O código abaixo representa o modo de como se calcular a equaliação do histograma de uma imagem. A equalização é feita com base em uma operação sobre cada posição de um vertor de probabilidade acumulada de um histograma da imagem original. Essa operação é feita pela multiplicação do mesmo pelo valor máximo de um pixel qualquer da matriz (imagem) original. A partir disso temos, para cada valor de pixel da matriz original, o seu valor novo correspondente, o qual será dado pelo valor de uma posição do vetor final na posição da intensidade do pixel orignal da matriz. <br>
				O código ... <br>
			</h4>

				<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iostream</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>vector</span><span style='color:#800000; '>></span><span style='color:#004a43; '> </span>

<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> <span style='color:#666616; '>std</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>void</span> equalizedImg<span style='color:#808030; '>(</span>Mat <span style='color:#808030; '>&amp;</span>histOut<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> vet<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>void</span> imHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> Mat imageGray<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>void</span> calcProbHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> probHist<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>int</span> amountPix<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>void</span> calcProbCumHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHist<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> probHistCum<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>void</span> calcEqualizedHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHistCum<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> equalizedHist<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>float</span> maxIntensity<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> argc<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span> argv<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  Mat imageRGB<span style='color:#808030; '>,</span> imageGray<span style='color:#808030; '>,</span> imageAux<span style='color:#800080; '>;</span>
  Mat histAcum<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  VideoCapture cap<span style='color:#800080; '>;</span>
  
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>float</span> maxIntensity <span style='color:#808030; '>=</span> <span style='color:#008000; '>255.0</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHist <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHistCum <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> equalizedHist<span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  cap<span style='color:#808030; '>.</span>open<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>cap<span style='color:#808030; '>.</span>isOpened<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>cameras indisponiveis</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
  

  <span style='color:#800000; font-weight:bold; '>int</span> width  <span style='color:#808030; '>=</span> cap<span style='color:#808030; '>.</span>get<span style='color:#808030; '>(</span>CV_CAP_PROP_FRAME_WIDTH<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>int</span> height <span style='color:#808030; '>=</span> cap<span style='color:#808030; '>.</span>get<span style='color:#808030; '>(</span>CV_CAP_PROP_FRAME_HEIGHT<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#800000; font-weight:bold; '>int</span> amountPix <span style='color:#808030; '>=</span> width<span style='color:#808030; '>*</span>height<span style='color:#800080; '>;</span>

  <span style='color:#800000; font-weight:bold; '>while</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>

    cap <span style='color:#808030; '>></span><span style='color:#808030; '>></span> imageRGB<span style='color:#800080; '>;</span>
    
    cvtColor<span style='color:#808030; '>(</span>imageRGB<span style='color:#808030; '>,</span>imageGray<span style='color:#808030; '>,</span>CV_RGB2GRAY<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    imHist<span style='color:#808030; '>(</span>imageGray<span style='color:#808030; '>,</span>histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    calcProbHist<span style='color:#808030; '>(</span>histogram<span style='color:#808030; '>,</span>probHist<span style='color:#808030; '>,</span>amountPix<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    calcProbCumHist<span style='color:#808030; '>(</span>probHist<span style='color:#808030; '>,</span>probHistCum<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    calcEqualizedHist<span style='color:#808030; '>(</span>probHistCum<span style='color:#808030; '>,</span>equalizedHist<span style='color:#808030; '>,</span>maxIntensity<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    imageAux <span style='color:#808030; '>=</span> imageGray<span style='color:#808030; '>.</span>clone<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    equalizedImg<span style='color:#808030; '>(</span>imageAux<span style='color:#808030; '>,</span>equalizedHist<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    
    imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>equalized_image</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> imageAux<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>original_image</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> imageGray<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>waitKey<span style='color:#808030; '>(</span><span style='color:#008c00; '>30</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>></span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
      <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
  <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> imHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> Mat imageGray<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> imageGray<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span>
    <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j <span style='color:#808030; '>&lt;</span> imageGray<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>)</span>
       histogram<span style='color:#808030; '>[</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>)</span>imageGray<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span><span style='color:#808030; '>]</span><span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> calcProbHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> probHist<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>int</span> amountPix<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> histogram<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    probHist<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> histogram<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>/</span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#808030; '>)</span>amountPix<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> calcProbCumHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHist<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> probHistCum<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  probHistCum<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> probHist<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> probHist<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    probHistCum<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> probHistCum<span style='color:#808030; '>[</span>i<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>+</span> probHist<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> calcEqualizedHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHistCum<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> equalizedHist<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>float</span> maxIntensity<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> probHistCum<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    equalizedHist<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> cvRound<span style='color:#808030; '>(</span>probHistCum<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>*</span>maxIntensity<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> equalizedImg<span style='color:#808030; '>(</span>Mat <span style='color:#808030; '>&amp;</span>histOut<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> vet<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> y <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> y <span style='color:#808030; '>&lt;</span> histOut<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>y<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> x <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> x <span style='color:#808030; '>&lt;</span> histOut<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>x<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      histOut<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span> vet<span style='color:#808030; '>[</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>)</span>histOut<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>)</span><span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>

		<h4 id="details"> Detalhes do programa: </h4><br>
		<h4>
			Em primeiro lugar declaramos todas as variáveis que usaremos durante o program: matrizes 'imageRGB', 'imageGray', entre outras imagens. Além de imagens, nós declaramos também a variável 'cap' do tipo VideoCapture para fazer a captura de cada imagem da câmera e depois declaramos os vetores que armazenarão os histogramas e suas variações. <br>
			Após isso tudo, tambéḿ verificamos se a câmera foi aberta e, caso positivo, armazenamos os valores do tamanho das imagens nas variáveis 'width' e 'height', pegando também a quantidade de pixeis da imagem por 'amountPix'.		
		</h4>

		<pre style='color:#000000;background:#ffffff;'>Mat imageRGB<span style='color:#808030; '>,</span> imageGray<span style='color:#808030; '>,</span> imageAux<span style='color:#800080; '>;</span>
  Mat histAcum<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  VideoCapture cap<span style='color:#800080; '>;</span>
  
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>float</span> maxIntensity <span style='color:#808030; '>=</span> <span style='color:#008000; '>255.0</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHist <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHistCum <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> equalizedHist<span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  cap<span style='color:#808030; '>.</span>open<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>cap<span style='color:#808030; '>.</span>isOpened<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>cameras indisponiveis</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
  

  <span style='color:#800000; font-weight:bold; '>int</span> width  <span style='color:#808030; '>=</span> cap<span style='color:#808030; '>.</span>get<span style='color:#808030; '>(</span>CV_CAP_PROP_FRAME_WIDTH<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>int</span> height <span style='color:#808030; '>=</span> cap<span style='color:#808030; '>.</span>get<span style='color:#808030; '>(</span>CV_CAP_PROP_FRAME_HEIGHT<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#800000; font-weight:bold; '>int</span> amountPix <span style='color:#808030; '>=</span> width<span style='color:#808030; '>*</span>height<span style='color:#800080; '>;</span>
</pre>

		<h4>
			Após esses passos anteriores, demos início ao <em>loop</em> infinito, onde para cada iteração capturamos uma nova imagem colorida e a transformamos em uma em tons de cinza por meio do método da OpenCV, o cvtColor(). <br>
			Com a imagem a ser processada em mãos, realizamos o seu respectivo histrograma e suas variações por meio das funções <br>
			<pre style='color:#000000;background:#ffffff;'>imHist<span style='color:#808030; '>(</span>imageGray<span style='color:#808030; '>,</span>histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				    calcProbHist<span style='color:#808030; '>(</span>histogram<span style='color:#808030; '>,</span>probHist<span style='color:#808030; '>,</span>amountPix<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			    calcProbCumHist<span style='color:#808030; '>(</span>probHist<span style='color:#808030; '>,</span>probHistCum<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			    calcEqualizedHist<span style='color:#808030; '>(</span>probHistCum<span style='color:#808030; '>,</span>equalizedHist<span style='color:#808030; '>,</span>maxIntensity<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			</pre>
			que serão apresentadas logo mais. <br>
			Utilizando agora o vetor <em>equalizedHist</em>, fizemos a equalização da imagem e armazenamos o resultado em <em>imageAux</em> por meio da função <em>equalizedImg</em>, a exibindo logo após.<br>

		</h4>
		<h4>
			As funções que transforma o vetor <em>histogram</em> em um vetor equalizado <em>equalizedHist</em> são:
			<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>void</span> imHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> Mat imageGray<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> imageGray<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span>
    <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j <span style='color:#808030; '>&lt;</span> imageGray<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>)</span>
       histogram<span style='color:#808030; '>[</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>)</span>imageGray<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span><span style='color:#808030; '>]</span><span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> calcProbHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> probHist<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>int</span> amountPix<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> histogram<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    probHist<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> histogram<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>/</span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#808030; '>)</span>amountPix<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> calcProbCumHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHist<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> probHistCum<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  probHistCum<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> probHist<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> probHist<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    probHistCum<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> probHistCum<span style='color:#808030; '>[</span>i<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>+</span> probHist<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> calcEqualizedHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> probHistCum<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> equalizedHist<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>float</span> maxIntensity<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> probHistCum<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    equalizedHist<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> cvRound<span style='color:#808030; '>(</span>probHistCum<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>*</span>maxIntensity<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> equalizedImg<span style='color:#808030; '>(</span>Mat <span style='color:#808030; '>&amp;</span>histOut<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> vet<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> y <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> y <span style='color:#808030; '>&lt;</span> histOut<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>y<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> x <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> x <span style='color:#808030; '>&lt;</span> histOut<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>x<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      histOut<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span> vet<span style='color:#808030; '>[</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>)</span>histOut<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>)</span><span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
		</h4>
		<h4 id="details">Dos resultados</h4>
		<h4>Os resultados obtidos com o código acima foram os seguintes </h4>
		<img src="imagens/fig8.png" class="img-responsive" id="fig8">
		<img src="imagens/fig7.png" class="img-responsive" id="fig7">
		</div>

		<div id="ex5_gamb"></div>
		<div id="ex5">
			<h3>5. MotionDetector.cpp</h3>
			<h4>O algoritimo a ser mostrato foi desenvolvido com o objetvo de detectar o movimento de uma pessoa, fazendo isso por meio da análize de um histograma de tal imagem. Esse algorítimo está decrito abaixo</h4>
			<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iostream</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>cmath</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>vector</span><span style='color:#800000; '>></span><span style='color:#004a43; '> </span>

<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> <span style='color:#666616; '>std</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>void</span> imHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> Mat imageGray<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>bool</span> calcDifference<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogramBefore<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> argc<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span> argv<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  Mat imageRGB<span style='color:#808030; '>,</span> imageGray<span style='color:#808030; '>,</span> imageAnt<span style='color:#800080; '>;</span>
  Mat histAcum<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  VideoCapture cap<span style='color:#800080; '>;</span>
  
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogramBefore <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>int</span> aux <span style='color:#808030; '>=</span> <span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>

  cap<span style='color:#808030; '>.</span>open<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>cap<span style='color:#808030; '>.</span>isOpened<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>cameras indisponiveis</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
  
  <span style='color:#800000; font-weight:bold; '>while</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    cap <span style='color:#808030; '>></span><span style='color:#808030; '>></span> imageRGB<span style='color:#800080; '>;</span>
    cvtColor<span style='color:#808030; '>(</span>imageRGB<span style='color:#808030; '>,</span>imageGray<span style='color:#808030; '>,</span>CV_RGB2GRAY<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    histogram <span style='color:#808030; '>=</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    
    imHist<span style='color:#808030; '>(</span>imageGray<span style='color:#808030; '>,</span>histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>calcDifference<span style='color:#808030; '>(</span>histogram<span style='color:#808030; '>,</span>histogramBefore<span style='color:#808030; '>)</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span> aux <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>

    histogramBefore <span style='color:#808030; '>=</span> histogram<span style='color:#800080; '>;</span>
    
    aux <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
  <span style='color:#603000; '>cout</span><span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span><span style='color:#800000; '>"</span><span style='color:#0f69ff; '>\n</span><span style='color:#0f69ff; '>\n</span><span style='color:#0000e6; '>ALARME ATIVADO !!</span><span style='color:#0f69ff; '>\n</span><span style='color:#0f69ff; '>\n</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> imHist<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> Mat imageGray<span style='color:#808030; '>,</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>&amp;</span> histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> imageGray<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span>
    <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j <span style='color:#808030; '>&lt;</span> imageGray<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>)</span>
       histogram<span style='color:#808030; '>[</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>)</span>imageGray<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span><span style='color:#808030; '>]</span><span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>bool</span> calcDifference<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogramBefore<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> sum <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>signed</span><span style='color:#808030; '>)</span>histogram<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    sum <span style='color:#808030; '>+</span><span style='color:#808030; '>=</span> <span style='color:#603000; '>abs</span><span style='color:#808030; '>(</span>histogram<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>-</span> histogramBefore<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>sum <span style='color:#808030; '>></span> <span style='color:#008c00; '>100384</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#800000; font-weight:bold; '>true</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>
  <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#800000; font-weight:bold; '>false</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>

		<h4 id="details">Detalhes do programa: </h4>
		<h4>Em primeiro lugar, declaramos as variaveis que serão utilizados durante o programa. Fazendo isso, também verificamos se alguma das câmerars está disponível para ser utilizada.</h4>

		<pre style='color:#000000;background:#ffffff;'>Mat imageRGB<span style='color:#808030; '>,</span> imageGray<span style='color:#808030; '>,</span> imageAnt<span style='color:#800080; '>;</span>
  Mat histAcum<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  VideoCapture cap<span style='color:#800080; '>;</span>
  
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogram <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> histogramBefore <span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>int</span> aux <span style='color:#808030; '>=</span> <span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>

  cap<span style='color:#808030; '>.</span>open<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>cap<span style='color:#808030; '>.</span>isOpened<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#603000; '>cout</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>cameras indisponiveis</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
</pre>

		<h4>Com base nas variáveis criadas acima, iniciamos o programa. O programa, em síntese, é composto por um <em>loop</em> infinito que fica responsável por capturar cada quadro de uma câmera, encontrar seu respectivo histograma transformar as cores que estão lá em 'tons de cinza'.  </h4>

		<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>while</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    cap <span style='color:#808030; '>></span><span style='color:#808030; '>></span> imageRGB<span style='color:#800080; '>;</span>
    cvtColor<span style='color:#808030; '>(</span>imageRGB<span style='color:#808030; '>,</span>imageGray<span style='color:#808030; '>,</span>CV_RGB2GRAY<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    histogram <span style='color:#808030; '>=</span> <span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span><span style='color:#008c00; '>256</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    
    imHist<span style='color:#808030; '>(</span>imageGray<span style='color:#808030; '>,</span>histogram<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>calcDifference<span style='color:#808030; '>(</span>histogram<span style='color:#808030; '>,</span>histogramBefore<span style='color:#808030; '>)</span> <span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span> aux <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>

    histogramBefore <span style='color:#808030; '>=</span> histogram<span style='color:#800080; '>;</span>
    
    aux <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
</pre>
		<h4 id="details">Dos resultados</h4>
		<h4>Apesar de não ter como descrever os resultados, visto que teriamos que vazer um vídeo para mostrarmos, eles foram satisfatórios ao testarmos o programa acima. Quando uma pessoa passava em frente a câmera, ela imediatamente ativava o alarme.</h4>
		</div>
		<div id="ex6_gamb"></div>
		<div id="ex6">
			<h3>6. LaplGauss</h3>
			<h4>
				Este algorítimo visa fazer a operação de um laplaciano do gaussiano de uma imagem, tendo como objetivo físico perceber de forma nítida os contornos de cada <em>frame</em> tirado pela câmera de um notebook. <br> 
				O programa resultante criado para atender a tais objetivos citados foi implementado dessa forma: 
			</h4>

			<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> argvc<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span> argv<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  VideoCapture video<span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>float</span> gauss<span style='color:#808030; '>[</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> <span style='color:#800080; '>{</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>2</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>4</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>float</span> laplacian<span style='color:#808030; '>[</span><span style='color:#808030; '>]</span><span style='color:#808030; '>=</span><span style='color:#800080; '>{</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>4</span><span style='color:#808030; '>,</span><span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>

  Mat cap<span style='color:#808030; '>,</span> frame<span style='color:#808030; '>,</span> frame32f<span style='color:#808030; '>,</span> frameFiltered<span style='color:#800080; '>;</span>
  Mat mask_gauss<span style='color:#808030; '>(</span><span style='color:#008c00; '>3</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>3</span><span style='color:#808030; '>,</span>CV_32F<span style='color:#808030; '>,</span>gauss<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> mask_lapl<span style='color:#808030; '>(</span><span style='color:#008c00; '>3</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>3</span><span style='color:#808030; '>,</span>CV_32F<span style='color:#808030; '>,</span>laplacian<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  Mat result<span style='color:#800080; '>;</span>
  
  video<span style='color:#808030; '>.</span>open<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> 
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>video<span style='color:#808030; '>.</span>isOpened<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> 
    <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>

  namedWindow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>filtroespacial</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>cout</span><span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>Laplaciano do gaussiano!</span><span style='color:#0f69ff; '>\n</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>while</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>true</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    video <span style='color:#808030; '>></span><span style='color:#808030; '>></span> cap<span style='color:#800080; '>;</span> 
    cvtColor<span style='color:#808030; '>(</span>cap<span style='color:#808030; '>,</span> frame<span style='color:#808030; '>,</span> CV_BGR2GRAY<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>original</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> frame<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> 	
    
    frame<span style='color:#808030; '>.</span>convertTo<span style='color:#808030; '>(</span>frame32f<span style='color:#808030; '>,</span> CV_32F<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    filter2D<span style='color:#808030; '>(</span>frame32f<span style='color:#808030; '>,</span> frameFiltered<span style='color:#808030; '>,</span> frame32f<span style='color:#808030; '>.</span>depth<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> mask_gauss<span style='color:#808030; '>,</span> Point<span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> 
    
    frame32f <span style='color:#808030; '>=</span> Mat<span style='color:#808030; '>(</span>frameFiltered<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    filter2D<span style='color:#808030; '>(</span>frame32f<span style='color:#808030; '>,</span> frameFiltered<span style='color:#808030; '>,</span> frame32f<span style='color:#808030; '>.</span>depth<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> mask_lapl<span style='color:#808030; '>,</span> Point<span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> 

    frameFiltered<span style='color:#808030; '>.</span>convertTo<span style='color:#808030; '>(</span>result<span style='color:#808030; '>,</span> CV_8U<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    
    imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>filtroespacial</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> result<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>waitKey<span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>!</span><span style='color:#808030; '>=</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span>
      <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
  <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
			<h4>
				Podemos perceber que foram declaradas duas matrizes (<em>gauss</em> e <em>laplacian</em>) no programa acima, as quais serão responsáveis por armazenar as mascaras a serem usadas. Em seguida, criamos as variáveis de matrizes que serão usadas e abrimos a câmera do PC.
				Com a câmera devidamente disponível, demos início a captura de <em>frames</em>.<br>
				Para cada tela capturada, prosseguimos com a seguinte ordem: convertemos a mesma para tons de cinza => a exibimos => a convertemos para o tipo CV_32F => aplicamos o filter2D para encontrarmos o gaussiano => aplicamos novamente o filter2D para encontrar o laplaciano da gaussiana => a convertemos para que possa ser exibida e a exibimos. Esse procedimento é parado até quando apertarmos alguma tecla.
			</h4>
		</div>
		<div id="ex7_gamb"></div>
		<div id="ex7">
			<h3>7. TiltShift.cpp</h3>
			<h4>
				Este programa é feito com o objetivo da edição do foco em uma imagem de arquivo. Com ele nós podemos abrir uma imagem, editá-la e depois salvá-la. Abaixo está a main do código.
			</h4>
<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> argvc<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span> argv<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>char</span> name<span style='color:#808030; '>[</span>Max_size_name<span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
  <span style='color:#603000; '>cout</span><span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>Informe o arquivo.jpg: </span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
  <span style='color:#603000; '>cin</span><span style='color:#808030; '>.</span>getline<span style='color:#808030; '>(</span>name<span style='color:#808030; '>,</span> Max_size_name<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  orige_image <span style='color:#808030; '>=</span> imread<span style='color:#808030; '>(</span>name<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  width <span style='color:#808030; '>=</span> orige_image<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span>
  height <span style='color:#808030; '>=</span> orige_image<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span>
  <span style='color:#696969; '>// blurry_image.copyTo(imageTop);</span>
  <span style='color:#800000; font-weight:bold; '>float</span> media<span style='color:#808030; '>[</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> <span style='color:#800080; '>{</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>
  Mat mask <span style='color:#808030; '>=</span> Mat<span style='color:#808030; '>(</span><span style='color:#008c00; '>5</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>5</span><span style='color:#808030; '>,</span> CV_32F<span style='color:#808030; '>,</span> media<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  scaleAdd<span style='color:#808030; '>(</span>mask<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>/</span><span style='color:#008000; '>9.0</span><span style='color:#808030; '>,</span> Mat<span style='color:#800080; '>::</span>zeros<span style='color:#808030; '>(</span><span style='color:#008c00; '>5</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>5</span><span style='color:#808030; '>,</span>CV_32F<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> mask<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  filter2D<span style='color:#808030; '>(</span>orige_image<span style='color:#808030; '>,</span> blurry_image<span style='color:#808030; '>,</span> orige_image<span style='color:#808030; '>.</span>depth<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> mask<span style='color:#808030; '>,</span> Point<span style='color:#808030; '>(</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> 
  
  <span style='color:#696969; '>// imshow("Higor",blurry_image);</span>

  namedWindow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>addweighted</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  
  <span style='color:#603000; '>sprintf</span><span style='color:#808030; '>(</span> TrackbarName<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>Height:</span><span style='color:#0f69ff; '>\t</span><span style='color:#0000e6; '> </span><span style='color:#007997; '>%d</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> top_slider_max <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> 
  createTrackbar<span style='color:#808030; '>(</span> TrackbarName<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>addweighted</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#808030; '>&amp;</span>h_slider<span style='color:#808030; '>,</span> top_slider_max<span style='color:#808030; '>,</span> on_trackbar_line <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>sprintf</span><span style='color:#808030; '>(</span> TrackbarName<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>Variability: </span><span style='color:#007997; '>%d</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> top_slider_max <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  createTrackbar<span style='color:#808030; '>(</span> TrackbarName<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>addweighted</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#808030; '>&amp;</span>v_slider<span style='color:#808030; '>,</span> top_slider_max<span style='color:#808030; '>,</span> on_trackbar_line<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>sprintf</span><span style='color:#808030; '>(</span> TrackbarName<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>Position: </span><span style='color:#007997; '>%d</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> top_slider_max <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  createTrackbar<span style='color:#808030; '>(</span> TrackbarName<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>addweighted</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#808030; '>&amp;</span>p_slider<span style='color:#808030; '>,</span> top_slider_max<span style='color:#808030; '>,</span> on_trackbar_line<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  on_trackbar_line<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span> <span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  waitKey<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

  <span style='color:#603000; '>cout</span><span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>Do you want to save the final image: (Y = yes or N = not)</span><span style='color:#0f69ff; '>\n</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>char</span> op<span style='color:#800080; '>;</span>
  <span style='color:#603000; '>cin</span><span style='color:#808030; '>></span><span style='color:#808030; '>></span>op<span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>op <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#0000e6; '>'Y'</span><span style='color:#808030; '>)</span>
    imwrite<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>./final_img.jpg</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> blended<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>	
		<h4>Em seguida estão as funções utilizadas</h4>
		<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>void</span> on_trackbar_line<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>void</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>float</span> h_focus <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>h_slider<span style='color:#808030; '>/</span><span style='color:#008000; '>100.0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>*</span>width<span style='color:#808030; '>)</span><span style='color:#808030; '>/</span><span style='color:#008000; '>2.0</span><span style='color:#800080; '>;</span>
  <span style='color:#800000; font-weight:bold; '>float</span> p_real <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>p_slider<span style='color:#808030; '>/</span><span style='color:#008000; '>100.0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>*</span>width<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  l1 <span style='color:#808030; '>=</span> p_real <span style='color:#808030; '>-</span> h_focus<span style='color:#800080; '>;</span>
  l2 <span style='color:#808030; '>=</span> p_real <span style='color:#808030; '>+</span> h_focus<span style='color:#800080; '>;</span>
  on_trackbar_blend<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>void</span> on_trackbar_blend<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>void</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  orige_image<span style='color:#808030; '>.</span>convertTo<span style='color:#808030; '>(</span>orige_image<span style='color:#808030; '>,</span> CV_32F<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  blurry_image<span style='color:#808030; '>.</span>convertTo<span style='color:#808030; '>(</span>blurry_image<span style='color:#808030; '>,</span>CV_32F<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  blurry_image<span style='color:#808030; '>.</span>convertTo<span style='color:#808030; '>(</span>blended<span style='color:#808030; '>,</span>CV_32F<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  
  <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> width<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>float</span> pix <span style='color:#808030; '>=</span> tiltShift<span style='color:#808030; '>(</span>i<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j <span style='color:#808030; '>&lt;</span> <span style='color:#008c00; '>3</span><span style='color:#808030; '>*</span>height<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
      blended<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span> orige_image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span><span style='color:#808030; '>*</span>pix <span style='color:#808030; '>+</span> blurry_image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span><span style='color:#808030; '>*</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>-</span>pix<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
  <span style='color:#800080; '>}</span>

  blended<span style='color:#808030; '>.</span>convertTo<span style='color:#808030; '>(</span>blended<span style='color:#808030; '>,</span>CV_8U<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
  imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>addweighted</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> blended<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>

<span style='color:#800000; font-weight:bold; '>float</span> tiltShift<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>int</span> pos<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
  <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008000; '>0.5</span><span style='color:#808030; '>*</span><span style='color:#808030; '>(</span><span style='color:#603000; '>tanh</span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>pos<span style='color:#808030; '>-</span>l1<span style='color:#808030; '>)</span><span style='color:#808030; '>/</span>v_slider<span style='color:#808030; '>)</span> <span style='color:#808030; '>-</span> <span style='color:#603000; '>tanh</span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>pos<span style='color:#808030; '>-</span>l2<span style='color:#808030; '>)</span><span style='color:#808030; '>/</span>v_slider<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>
		<h4 id="details">Detalhes do programa</h4>		
		<h4>Apesar de não estar presente no cógido acima, 		declaramos variáveis globais que auxiliam no 		desenvolvimento do progrma. <br> 
			Após isso, já na main, abrimos o arquivo com um nome especificado pelo usuário e o armazenamos na variável <em>orige_image</em>, que é a imagem que será utilizada para manipulação. <br>
			Logo em seguida, fizemos e salvamos o borramento da imagem em outra imagem (<em>blurry_image</em>). Sendo assim, já partimos para abrir uma janela onde ficaria a interface e criamos alguns <em>trackbar</em>, os quais exibirão as três funções do programa.
		</h4>
		<h4>
			Agora explicando as funções <em>on_trackbar_line()</em>, <em>on_trackbar_blend()</em> e <em>tiltShift()</em>. A primeira é responsável por preparar os valores de L1 e L2 para o cálculo da função tiltshift. Já a segunda é responsável por aplicar o resultado da tiltshift a cada linha da matriz final (<em>blended</em>) considerando a composição ponderada das duas imagens: <em>orige_image</em> e <em>blurry_image</em>. A última é apenas responsável pelo cálculo de cada valor da tiltshift, passando como parâmetro a posição 'pos'.
		</h4>
		<h4 id="details">Dos resultados</h4>
		<h4>Aqui esta uma foto de como ficou o resultado da interface<br></h4>
		<img src="imagens/fig9.png" class="img-responsive" id="fig9">
		</div>

	<div id="ex8_gamb"></div>
	<div id="ex8">
		<h3>8. dft.cpp</h3>
		<h4>
		</h4>
		<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iostream</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>cmath</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/imgproc/imgproc.hpp</span><span style='color:#800000; '>></span>
			
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> RADIUS 20</span>
			
			<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>
			<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> <span style='color:#666616; '>std</span><span style='color:#800080; '>;</span>
			
			
			
			<span style='color:#696969; '>// troca os quadrantes da imagem da DFT</span>
			<span style='color:#800000; font-weight:bold; '>void</span> deslocaDFT<span style='color:#808030; '>(</span>Mat<span style='color:#808030; '>&amp;</span> image <span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
			
				Mat tmp<span style='color:#808030; '>,</span> A<span style='color:#808030; '>,</span> B<span style='color:#808030; '>,</span> C<span style='color:#808030; '>,</span> D<span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// se a imagem tiver tamanho impar, recorta a regiao para</span>
				<span style='color:#696969; '>// evitar copias de tamanho desigual</span>
				image <span style='color:#808030; '>=</span> image<span style='color:#808030; '>(</span>Rect<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> image<span style='color:#808030; '>.</span>cols <span style='color:#808030; '>&amp;</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>,</span> image<span style='color:#808030; '>.</span>rows <span style='color:#808030; '>&amp;</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>int</span> cx <span style='color:#808030; '>=</span> image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>int</span> cy <span style='color:#808030; '>=</span> image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// reorganiza os quadrantes da transformada</span>
				<span style='color:#696969; '>// A B   ->  D C</span>
				<span style='color:#696969; '>// C D       B A</span>
				A <span style='color:#808030; '>=</span> image<span style='color:#808030; '>(</span>Rect<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> cx<span style='color:#808030; '>,</span> cy<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				B <span style='color:#808030; '>=</span> image<span style='color:#808030; '>(</span>Rect<span style='color:#808030; '>(</span>cx<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> cx<span style='color:#808030; '>,</span> cy<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				C <span style='color:#808030; '>=</span> image<span style='color:#808030; '>(</span>Rect<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> cy<span style='color:#808030; '>,</span> cx<span style='color:#808030; '>,</span> cy<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				D <span style='color:#808030; '>=</span> image<span style='color:#808030; '>(</span>Rect<span style='color:#808030; '>(</span>cx<span style='color:#808030; '>,</span> cy<span style='color:#808030; '>,</span> cx<span style='color:#808030; '>,</span> cy<span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// A &lt;-> D</span>
				A<span style='color:#808030; '>.</span>copyTo<span style='color:#808030; '>(</span>tmp<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>  D<span style='color:#808030; '>.</span>copyTo<span style='color:#808030; '>(</span>A<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>  tmp<span style='color:#808030; '>.</span>copyTo<span style='color:#808030; '>(</span>D<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// C &lt;-> B</span>
				C<span style='color:#808030; '>.</span>copyTo<span style='color:#808030; '>(</span>tmp<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>  B<span style='color:#808030; '>.</span>copyTo<span style='color:#808030; '>(</span>C<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>  tmp<span style='color:#808030; '>.</span>copyTo<span style='color:#808030; '>(</span>B<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			<span style='color:#800080; '>}</span>
			
			<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				VideoCapture cap<span style='color:#800080; '>;</span>
				Mat imaginaryInput<span style='color:#808030; '>,</span> complexImage<span style='color:#808030; '>,</span> multsp<span style='color:#800080; '>;</span>
				Mat padded<span style='color:#808030; '>,</span> filter<span style='color:#808030; '>,</span> mag<span style='color:#800080; '>;</span>
				Mat image<span style='color:#808030; '>,</span> imagegray<span style='color:#808030; '>,</span> tmp<span style='color:#800080; '>;</span>
				Mat_<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> realInput<span style='color:#808030; '>,</span> zeros<span style='color:#800080; '>;</span>
				<span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span>Mat<span style='color:#800080; '>></span> planos<span style='color:#800080; '>;</span>
			
			
				<span style='color:#696969; '>// valores ideais dos tamanhos da imagem</span>
				<span style='color:#696969; '>// para calculo da DFT</span>
				<span style='color:#800000; font-weight:bold; '>int</span> dft_M<span style='color:#808030; '>,</span> dft_N<span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// abre a camera default</span>
				cap<span style='color:#808030; '>.</span>open<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#808030; '>!</span>cap<span style='color:#808030; '>.</span>isOpened<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span>
					<span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// captura uma imagem para recuperar as</span>
				<span style='color:#696969; '>// informacoes de gravacao</span>
				cap <span style='color:#808030; '>></span><span style='color:#808030; '>></span> image<span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// identifica os tamanhos otimos para</span>
				<span style='color:#696969; '>// calculo do FFT</span>
				dft_M <span style='color:#808030; '>=</span> getOptimalDFTSize<span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				dft_N <span style='color:#808030; '>=</span> getOptimalDFTSize<span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// realiza o padding da imagem</span>
				copyMakeBorder<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span> padded<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span>
											 dft_M <span style='color:#808030; '>-</span> image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span>
											 dft_N <span style='color:#808030; '>-</span> image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>,</span>
											 BORDER_CONSTANT<span style='color:#808030; '>,</span> Scalar<span style='color:#800080; '>::</span>all<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// parte imaginaria da matriz complexa (preenchida com zeros)</span>
				zeros <span style='color:#808030; '>=</span> Mat_<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#800080; '>::</span>zeros<span style='color:#808030; '>(</span>padded<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// prepara a matriz complexa para ser preenchida</span>
				complexImage <span style='color:#808030; '>=</span> Mat<span style='color:#808030; '>(</span>padded<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> CV_32FC2<span style='color:#808030; '>,</span> Scalar<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// a funcao de transferencia (filtro frequencial) deve ter o</span>
				<span style='color:#696969; '>// mesmo tamanho e tipo da matriz complexa</span>
				filter <span style='color:#808030; '>=</span> complexImage<span style='color:#808030; '>.</span>clone<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// cria uma matriz temporaria para criar as componentes real</span>
				<span style='color:#696969; '>// e imaginaria do filtro ideal</span>
				tmp <span style='color:#808030; '>=</span> Mat<span style='color:#808030; '>(</span>dft_M<span style='color:#808030; '>,</span> dft_N<span style='color:#808030; '>,</span> CV_32F<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#603000; '>cout</span><span style='color:#808030; '>&lt;</span><span style='color:#808030; '>&lt;</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>Defina gama H e gama L: </span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>float</span> gH<span style='color:#808030; '>,</span> gL<span style='color:#800080; '>;</span>
				<span style='color:#603000; '>cin</span><span style='color:#808030; '>></span><span style='color:#808030; '>></span>gH<span style='color:#808030; '>></span><span style='color:#808030; '>></span>gL<span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>// prepara o filtro </span>
				<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>dft_M<span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
					<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j<span style='color:#808030; '>&lt;</span>dft_N<span style='color:#800080; '>;</span> j<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
					<span style='color:#800000; font-weight:bold; '>float</span> D <span style='color:#808030; '>=</span> <span style='color:#603000; '>sqrt</span><span style='color:#808030; '>(</span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>-</span>dft_M<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>*</span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>-</span>dft_M<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>+</span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>-</span>dft_N<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>*</span><span style='color:#808030; '>(</span>j<span style='color:#808030; '>-</span>dft_N<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
						tmp<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span> <span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span>gH <span style='color:#808030; '>-</span> gL<span style='color:#808030; '>)</span><span style='color:#808030; '>*</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span> <span style='color:#808030; '>-</span> <span style='color:#603000; '>pow</span><span style='color:#808030; '>(</span>M_E<span style='color:#808030; '>,</span><span style='color:#808030; '>-</span><span style='color:#603000; '>pow</span><span style='color:#808030; '>(</span>D<span style='color:#808030; '>/</span>RADIUS<span style='color:#808030; '>,</span> <span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>+</span> gL<span style='color:#800080; '>;</span>
					<span style='color:#800080; '>}</span>
				<span style='color:#800080; '>}</span>
			
				<span style='color:#696969; '>// cria a matriz com as componentes do filtro e junta</span>
				<span style='color:#696969; '>// ambas em uma matriz multicanal complexa</span>
				Mat comps<span style='color:#808030; '>[</span><span style='color:#808030; '>]</span><span style='color:#808030; '>=</span> <span style='color:#800080; '>{</span>tmp<span style='color:#808030; '>,</span> tmp<span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>
				<span style='color:#603000; '>merge</span><span style='color:#808030; '>(</span>comps<span style='color:#808030; '>,</span> <span style='color:#008c00; '>2</span><span style='color:#808030; '>,</span> filter<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800080; '>;</span><span style='color:#800080; '>;</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
					cap <span style='color:#808030; '>></span><span style='color:#808030; '>></span> image<span style='color:#800080; '>;</span>
					cvtColor<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span> imagegray<span style='color:#808030; '>,</span> CV_BGR2GRAY<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					flip<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span>image<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>original</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> imagegray<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// realiza o padding da imagem</span>
					copyMakeBorder<span style='color:#808030; '>(</span>imagegray<span style='color:#808030; '>,</span> padded<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span>
												 dft_M <span style='color:#808030; '>-</span> image<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span>
												 dft_N <span style='color:#808030; '>-</span> image<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>,</span>
												 BORDER_CONSTANT<span style='color:#808030; '>,</span> Scalar<span style='color:#800080; '>::</span>all<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// limpa o array de matrizes que vao compor a</span>
					<span style='color:#696969; '>// imagem complexa</span>
					planos<span style='color:#808030; '>.</span>clear<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#696969; '>// cria a compoente real</span>
					realInput <span style='color:#808030; '>=</span> Mat_<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>padded<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#696969; '>// insere as duas componentes no array de matrizes</span>
					planos<span style='color:#808030; '>.</span>push_back<span style='color:#808030; '>(</span>realInput<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					planos<span style='color:#808030; '>.</span>push_back<span style='color:#808030; '>(</span>zeros<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// combina o array de matrizes em uma unica</span>
					<span style='color:#696969; '>// componente complexa</span>
					<span style='color:#603000; '>merge</span><span style='color:#808030; '>(</span>planos<span style='color:#808030; '>,</span> complexImage<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// calcula o dft</span>
					dft<span style='color:#808030; '>(</span>complexImage<span style='color:#808030; '>,</span> complexImage<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// realiza a troca de quadrantes</span>
					deslocaDFT<span style='color:#808030; '>(</span>complexImage<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>//imshow("dft", complexImage);</span>
			
					<span style='color:#696969; '>// aplica o filtro frequencial</span>
					mulSpectrums<span style='color:#808030; '>(</span>complexImage<span style='color:#808030; '>,</span>filter<span style='color:#808030; '>,</span>complexImage<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// limpa o array de planos</span>
					planos<span style='color:#808030; '>.</span>clear<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#696969; '>// separa as partes real e imaginaria para modificar</span>
					split<span style='color:#808030; '>(</span>complexImage<span style='color:#808030; '>,</span> planos<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// insere ruido coerente, se habilitado</span>
			
					<span style='color:#696969; '>// recompoe os planos em uma unica matriz complexa</span>
					<span style='color:#603000; '>merge</span><span style='color:#808030; '>(</span>planos<span style='color:#808030; '>,</span> complexImage<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// troca novamente os quadrantes</span>
					deslocaDFT<span style='color:#808030; '>(</span>complexImage<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// calcula a DFT inversa</span>
					idft<span style='color:#808030; '>(</span>complexImage<span style='color:#808030; '>,</span> complexImage<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// limpa o array de planos</span>
					planos<span style='color:#808030; '>.</span>clear<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// separa as partes real e imaginaria da</span>
					<span style='color:#696969; '>// imagem filtrada</span>
					split<span style='color:#808030; '>(</span>complexImage<span style='color:#808030; '>,</span> planos<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#696969; '>// normaliza a parte real para exibicao</span>
					normalize<span style='color:#808030; '>(</span>planos<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span> planos<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span> CV_MINMAX<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>filtrada</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> planos<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					waitKey<span style='color:#808030; '>(</span><span style='color:#008c00; '>10</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#800080; '>}</span>
				<span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
			<span style='color:#800080; '>}</span>
			</pre>
	</div>


	<div id="ex9_gamb"></div>
	<div id="ex9">
		<h3>9. cannypoints.cpp</h3>
		<h4>
		</h4>

		<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iostream</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>"</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>"</span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>fstream</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>iomanip</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>vector</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>algorithm</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>numeric</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>ctime</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>cstdlib</span><span style='color:#800000; '>></span>
			
			<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> <span style='color:#666616; '>std</span><span style='color:#800080; '>;</span>
			<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>
			
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> STEP 5</span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> JITTER 3</span>
			
			<span style='color:#800000; font-weight:bold; '>int</span> top_slider <span style='color:#808030; '>=</span> <span style='color:#008c00; '>100</span><span style='color:#800080; '>;</span>
			<span style='color:#800000; font-weight:bold; '>int</span> top_sliderR <span style='color:#808030; '>=</span> <span style='color:#008c00; '>3</span><span style='color:#800080; '>;</span>
			<span style='color:#800000; font-weight:bold; '>int</span> top_slider_max <span style='color:#808030; '>=</span> <span style='color:#008c00; '>200</span><span style='color:#800080; '>;</span>
			<span style='color:#800000; font-weight:bold; '>int</span> top_sliderR_max <span style='color:#808030; '>=</span> <span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span>
			
			<span style='color:#800000; font-weight:bold; '>char</span> TrackbarName<span style='color:#808030; '>[</span><span style='color:#008c00; '>50</span><span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
			<span style='color:#800000; font-weight:bold; '>char</span> TrackbarNameR<span style='color:#808030; '>[</span><span style='color:#008c00; '>50</span><span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
			
			Mat image<span style='color:#808030; '>,</span> border<span style='color:#808030; '>,</span> points<span style='color:#800080; '>;</span>
			
			
			<span style='color:#800000; font-weight:bold; '>void</span> pontilhismo<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				<span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> yrange<span style='color:#800080; '>;</span>
				<span style='color:#603000; '>vector</span><span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span> xrange<span style='color:#800080; '>;</span>
				<span style='color:#603000; '>srand</span><span style='color:#808030; '>(</span><span style='color:#603000; '>time</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#800000; font-weight:bold; '>int</span> width<span style='color:#808030; '>,</span> height<span style='color:#808030; '>,</span> gray<span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>int</span> x<span style='color:#808030; '>,</span> y<span style='color:#800080; '>;</span>  
				
			
				width<span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>width<span style='color:#800080; '>;</span>
				height<span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>height<span style='color:#800080; '>;</span>
			
				<span style='color:#696969; '>//circle(points, cv::Point(y,x), RAIO, CV_RGB(gray,gray,gray), -1, CV_AA);</span>
			
				xrange<span style='color:#808030; '>.</span>resize<span style='color:#808030; '>(</span>height<span style='color:#808030; '>/</span>STEP<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				yrange<span style='color:#808030; '>.</span>resize<span style='color:#808030; '>(</span>width<span style='color:#808030; '>/</span>STEP<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				
				iota<span style='color:#808030; '>(</span>xrange<span style='color:#808030; '>.</span>begin<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> xrange<span style='color:#808030; '>.</span>end<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> 
				iota<span style='color:#808030; '>(</span>yrange<span style='color:#808030; '>.</span>begin<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> yrange<span style='color:#808030; '>.</span>end<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span>uint i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>xrange<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
					xrange<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>=</span> xrange<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>*</span>STEP<span style='color:#808030; '>+</span>STEP<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#800080; '>;</span>
				<span style='color:#800080; '>}</span>
			
				<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span>uint i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>&lt;</span>yrange<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
					yrange<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>=</span> yrange<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>*</span>STEP<span style='color:#808030; '>+</span>STEP<span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#800080; '>;</span>
				<span style='color:#800080; '>}</span>
			
				<span style='color:#696969; '>//points = Mat(height, width, CV_8U, Scalar(255));</span>
			
				<span style='color:#603000; '>random_shuffle</span><span style='color:#808030; '>(</span>xrange<span style='color:#808030; '>.</span>begin<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> xrange<span style='color:#808030; '>.</span>end<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>auto</span> i <span style='color:#800080; '>:</span> xrange<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
					<span style='color:#603000; '>random_shuffle</span><span style='color:#808030; '>(</span>yrange<span style='color:#808030; '>.</span>begin<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> yrange<span style='color:#808030; '>.</span>end<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>auto</span> j <span style='color:#800080; '>:</span> yrange<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
						x <span style='color:#808030; '>=</span> i<span style='color:#808030; '>+</span><span style='color:#603000; '>rand</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>%</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>*</span>JITTER<span style='color:#808030; '>)</span><span style='color:#808030; '>-</span>JITTER<span style='color:#808030; '>+</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
						y <span style='color:#808030; '>=</span> j<span style='color:#808030; '>+</span><span style='color:#603000; '>rand</span><span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>%</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>*</span>JITTER<span style='color:#808030; '>)</span><span style='color:#808030; '>-</span>JITTER<span style='color:#808030; '>+</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
						gray <span style='color:#808030; '>=</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
						<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>border<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
						circle<span style='color:#808030; '>(</span>points<span style='color:#808030; '>,</span>
									 Point<span style='color:#808030; '>(</span>y<span style='color:#808030; '>,</span>x<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>
									 top_sliderR<span style='color:#808030; '>,</span>
									 CV_RGB<span style='color:#808030; '>(</span>gray<span style='color:#808030; '>,</span>gray<span style='color:#808030; '>,</span>gray<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>
									 <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span>
									 CV_AA<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#800080; '>}</span>
				<span style='color:#800080; '>}</span>
			<span style='color:#800080; '>}</span>
			
			
			<span style='color:#800000; font-weight:bold; '>void</span> on_trackbar_canny<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>void</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				Canny<span style='color:#808030; '>(</span>image<span style='color:#808030; '>,</span> border<span style='color:#808030; '>,</span> top_slider<span style='color:#808030; '>,</span> <span style='color:#008c00; '>3</span><span style='color:#808030; '>*</span>top_slider<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				points <span style='color:#808030; '>=</span> Mat<span style='color:#808030; '>(</span>image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>height<span style='color:#808030; '>,</span> image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>width<span style='color:#808030; '>,</span> CV_8U<span style='color:#808030; '>,</span> Scalar<span style='color:#808030; '>(</span><span style='color:#008c00; '>255</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>int</span> gray<span style='color:#800080; '>;</span>
			
				<span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> i <span style='color:#808030; '>&lt;</span> image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>width<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>i<span style='color:#808030; '>)</span>
				<span style='color:#800080; '>{</span>
					<span style='color:#800000; font-weight:bold; '>for</span> <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> j <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> j <span style='color:#808030; '>&lt;</span> image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>height<span style='color:#800080; '>;</span> <span style='color:#808030; '>+</span><span style='color:#808030; '>+</span>j<span style='color:#808030; '>)</span>
					<span style='color:#800080; '>{</span>
						gray <span style='color:#808030; '>=</span> image<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
						<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>border<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>uchar<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>i<span style='color:#808030; '>,</span>j<span style='color:#808030; '>)</span> <span style='color:#808030; '>!</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span>
							circle<span style='color:#808030; '>(</span>points<span style='color:#808030; '>,</span>
									 Point<span style='color:#808030; '>(</span>j<span style='color:#808030; '>,</span>i<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>
									 top_sliderR<span style='color:#808030; '>,</span>  <span style='color:#696969; '>// tem que ser criada a 'trackbar'</span>
									 CV_RGB<span style='color:#808030; '>(</span>gray<span style='color:#808030; '>,</span>gray<span style='color:#808030; '>,</span>gray<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>
									 <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span>
									 CV_AA<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#800080; '>}</span>
				<span style='color:#800080; '>}</span>
				pontilhismo<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>point</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> points<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				imshow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>canny</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span>border<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			<span style='color:#800080; '>}</span>
			
			<span style='color:#800000; font-weight:bold; '>void</span> on_trackbar_raio<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>void</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				on_trackbar_canny<span style='color:#808030; '>(</span>top_slider<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			<span style='color:#800080; '>}</span>
			
			<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> argc<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span>argv<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				<span style='color:#800000; font-weight:bold; '>int</span> width<span style='color:#808030; '>,</span> height<span style='color:#800080; '>;</span>
			
				image <span style='color:#808030; '>=</span> imread<span style='color:#808030; '>(</span>argv<span style='color:#808030; '>[</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>CV_LOAD_IMAGE_GRAYSCALE<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				
				width<span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>width<span style='color:#800080; '>;</span>
				height<span style='color:#808030; '>=</span>image<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>height<span style='color:#800080; '>;</span>
			
			
				<span style='color:#603000; '>sprintf</span><span style='color:#808030; '>(</span>TrackbarName<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>Threshold inferior</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> top_slider_max <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#603000; '>sprintf</span><span style='color:#808030; '>(</span>TrackbarNameR<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>RAIO</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> top_sliderR_max <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				namedWindow<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>canny</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				createTrackbar<span style='color:#808030; '>(</span>TrackbarName<span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>canny</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#808030; '>&amp;</span>top_slider<span style='color:#808030; '>,</span> top_slider_max<span style='color:#808030; '>,</span> on_trackbar_canny<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				createTrackbar<span style='color:#808030; '>(</span>TrackbarNameR<span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>canny</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#808030; '>&amp;</span>top_sliderR<span style='color:#808030; '>,</span> top_sliderR_max<span style='color:#808030; '>,</span> on_trackbar_raio<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				on_trackbar_canny<span style='color:#808030; '>(</span>top_slider<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				on_trackbar_raio<span style='color:#808030; '>(</span>top_sliderR<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				waitKey<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#696969; '>//imshow("pontos",points);</span>
				imwrite<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>cannyborders.png</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> border<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
			<span style='color:#800080; '>}</span>
			</pre>

	</div>


	<div id="ex10_gamb"></div>
	<div id="ex10">
		<h3>10. kmeans.cpp</h3>
		<h4>
		</h4>
		<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>opencv2/opencv.hpp</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>cstdlib</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>limits</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>algorithm</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>cstring</span><span style='color:#800000; '>></span>
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>string</span><span style='color:#800000; '>></span>
			
			<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> MAX 100</span>
			
			<span style='color:#800000; font-weight:bold; '>using</span> <span style='color:#800000; font-weight:bold; '>namespace</span> cv<span style='color:#800080; '>;</span>
			
			<span style='color:#800000; font-weight:bold; '>void</span> myreverse<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>char</span> s<span style='color:#808030; '>[</span><span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				<span style='color:#800000; font-weight:bold; '>int</span> i <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>while</span><span style='color:#808030; '>(</span>i <span style='color:#808030; '>&lt;</span> <span style='color:#603000; '>strlen</span><span style='color:#808030; '>(</span>s<span style='color:#808030; '>)</span><span style='color:#808030; '>/</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
					<span style='color:#603000; '>swap</span><span style='color:#808030; '>(</span>s<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>s<span style='color:#808030; '>[</span><span style='color:#603000; '>strlen</span><span style='color:#808030; '>(</span>s<span style='color:#808030; '>)</span><span style='color:#808030; '>-</span>i<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#800080; '>;</span>
				<span style='color:#800080; '>}</span>
			<span style='color:#800080; '>}</span>
			
			<span style='color:#800000; font-weight:bold; '>void</span> f<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>int</span> v<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span> s<span style='color:#808030; '>[</span><span style='color:#808030; '>]</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				<span style='color:#800000; font-weight:bold; '>int</span> i<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>do</span><span style='color:#800080; '>{</span>
					s<span style='color:#808030; '>[</span>i<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>(</span><span style='color:#0000e6; '>'0'</span> <span style='color:#808030; '>+</span> v<span style='color:#808030; '>%</span><span style='color:#008c00; '>10</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					v <span style='color:#808030; '>/</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>10</span><span style='color:#800080; '>;</span>
				<span style='color:#800080; '>}</span><span style='color:#800000; font-weight:bold; '>while</span><span style='color:#808030; '>(</span>v <span style='color:#808030; '>!</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				s<span style='color:#808030; '>[</span>i<span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> <span style='color:#0000e6; '>'\0'</span><span style='color:#800080; '>;</span>
				myreverse<span style='color:#808030; '>(</span>s<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			<span style='color:#800080; '>}</span>
			
			<span style='color:#800000; font-weight:bold; '>int</span> <span style='color:#400000; '>main</span><span style='color:#808030; '>(</span> <span style='color:#800000; font-weight:bold; '>int</span> argc<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>*</span> argv<span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				<span style='color:#800000; font-weight:bold; '>int</span> nClusters <span style='color:#808030; '>=</span> <span style='color:#008c00; '>6</span><span style='color:#800080; '>;</span>
				Mat rotulos<span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>int</span> nRodadas <span style='color:#808030; '>=</span> <span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
				Mat centros<span style='color:#800080; '>;</span>
				<span style='color:#800000; font-weight:bold; '>int</span> cont <span style='color:#808030; '>=</span> <span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span> 
			
				<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>argc<span style='color:#808030; '>!</span><span style='color:#808030; '>=</span><span style='color:#008c00; '>3</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
				 <span style='color:#603000; '>exit</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#800080; '>}</span>
				
				Mat img <span style='color:#808030; '>=</span> imread<span style='color:#808030; '>(</span> argv<span style='color:#808030; '>[</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span> CV_LOAD_IMAGE_COLOR<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
				<span style='color:#800000; font-weight:bold; '>do</span><span style='color:#800080; '>{</span>
					Mat samples<span style='color:#808030; '>(</span>img<span style='color:#808030; '>.</span>rows <span style='color:#808030; '>*</span> img<span style='color:#808030; '>.</span>cols<span style='color:#808030; '>,</span> <span style='color:#008c00; '>3</span><span style='color:#808030; '>,</span> CV_32F<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
					<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span> <span style='color:#800000; font-weight:bold; '>int</span> y <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> y <span style='color:#808030; '>&lt;</span> img<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span> y<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
						<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span> <span style='color:#800000; font-weight:bold; '>int</span> x <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> x <span style='color:#808030; '>&lt;</span> img<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span> x<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
							<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span> <span style='color:#800000; font-weight:bold; '>int</span> z <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> z <span style='color:#808030; '>&lt;</span> <span style='color:#008c00; '>3</span><span style='color:#800080; '>;</span> z<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span><span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
								samples<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>y <span style='color:#808030; '>+</span> x<span style='color:#808030; '>*</span>img<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>,</span> z<span style='color:#808030; '>)</span> <span style='color:#808030; '>=</span> img<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>Vec3b<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>y<span style='color:#808030; '>,</span>x<span style='color:#808030; '>)</span><span style='color:#808030; '>[</span>z<span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
						<span style='color:#800080; '>}</span>
					 <span style='color:#800080; '>}</span>
					<span style='color:#800080; '>}</span>
					
					kmeans<span style='color:#808030; '>(</span>samples<span style='color:#808030; '>,</span>
						 nClusters<span style='color:#808030; '>,</span>
						 rotulos<span style='color:#808030; '>,</span>
						 TermCriteria<span style='color:#808030; '>(</span>CV_TERMCRIT_ITER<span style='color:#808030; '>|</span>CV_TERMCRIT_EPS<span style='color:#808030; '>,</span> <span style='color:#008c00; '>10000</span><span style='color:#808030; '>,</span> <span style='color:#008000; '>0.0001</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>
						 nRodadas<span style='color:#808030; '>,</span>
						 KMEANS_RANDOM_CENTERS<span style='color:#808030; '>,</span>
						 centros <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			
			
					Mat rotulada<span style='color:#808030; '>(</span> img<span style='color:#808030; '>.</span>size<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> img<span style='color:#808030; '>.</span>type<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span> <span style='color:#800000; font-weight:bold; '>int</span> y <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> y <span style='color:#808030; '>&lt;</span> img<span style='color:#808030; '>.</span>rows<span style='color:#800080; '>;</span> y<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>{</span>
						<span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span> <span style='color:#800000; font-weight:bold; '>int</span> x <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span> x <span style='color:#808030; '>&lt;</span> img<span style='color:#808030; '>.</span>cols<span style='color:#800080; '>;</span> x<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>{</span> 
						<span style='color:#800000; font-weight:bold; '>int</span> indice <span style='color:#808030; '>=</span> rotulos<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>int</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>y <span style='color:#808030; '>+</span> x<span style='color:#808030; '>*</span>img<span style='color:#808030; '>.</span>rows<span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
						rotulada<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>Vec3b<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>y<span style='color:#808030; '>,</span>x<span style='color:#808030; '>)</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span>uchar<span style='color:#808030; '>)</span> centros<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>indice<span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
						rotulada<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>Vec3b<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>y<span style='color:#808030; '>,</span>x<span style='color:#808030; '>)</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span>uchar<span style='color:#808030; '>)</span> centros<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>indice<span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
						rotulada<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span>Vec3b<span style='color:#800080; '>></span><span style='color:#808030; '>(</span>y<span style='color:#808030; '>,</span>x<span style='color:#808030; '>)</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>]</span> <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span>uchar<span style='color:#808030; '>)</span> centros<span style='color:#808030; '>.</span>at<span style='color:#800080; '>&lt;</span><span style='color:#800000; font-weight:bold; '>float</span><span style='color:#800080; '>></span><span style='color:#808030; '>(</span>indice<span style='color:#808030; '>,</span> <span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
						 <span style='color:#800080; '>}</span>
					<span style='color:#800080; '>}</span>
			
					<span style='color:#800000; font-weight:bold; '>char</span> s_array<span style='color:#808030; '>[</span>MAX<span style='color:#808030; '>]</span><span style='color:#808030; '>,</span> aux_name<span style='color:#808030; '>[</span>MAX<span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
			
					f<span style='color:#808030; '>(</span>cont<span style='color:#808030; '>,</span>s_array<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#603000; '>strcpy</span><span style='color:#808030; '>(</span>aux_name<span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>img </span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#603000; '>strcat</span><span style='color:#808030; '>(</span>aux_name<span style='color:#808030; '>,</span>s_array<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					<span style='color:#603000; '>strcat</span><span style='color:#808030; '>(</span>aux_name<span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>.jpg</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					
					imwrite<span style='color:#808030; '>(</span>aux_name<span style='color:#808030; '>,</span>  rotulada<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
					
					waitKey<span style='color:#808030; '>(</span> <span style='color:#008c00; '>10</span> <span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
				<span style='color:#800080; '>}</span><span style='color:#800000; font-weight:bold; '>while</span><span style='color:#808030; '>(</span>cont<span style='color:#808030; '>+</span><span style='color:#808030; '>+</span> <span style='color:#808030; '>&lt;</span><span style='color:#808030; '>=</span> <span style='color:#008c00; '>10</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			<span style='color:#800080; '>}</span>
			</pre>
	</div>
</div>
</div>

  </body>